<!DOCTYPE html>
<html lang="en">
  
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>HomeLink - Find Your Dream Home</title>
  <style>
    /* General Reset */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f4f7fc;
      color: #333;
      line-height: 1.6;
    }
    .container { max-width: 1200px; margin: auto; padding: 1rem; }
    header {
      background: #2c3e50;
      color: white;
      padding: 1rem 0;
      text-align: center;
    }
    nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.5rem 1rem;
      background: white;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    nav .logo { font-weight: bold; font-size: 1.5rem; color: #2c3e50; }
    nav ul { display: flex; list-style: none; gap: 1.5rem; }
    nav a {
      text-decoration: none;
      color: #333;
      font-weight: 500;
    }
    button, .btn {
      padding: 0.5rem 1rem;
      border: none;
      border-radius: 5px;
      background: #3498db;
      color: white;
      cursor: pointer;
      font-size: 1rem;
    }
    button:hover, .btn:hover { background: #2980b9; }
    .btn-outline { background: transparent; border: 1px solid #3498db; color: #3498db; }
    .btn-outline:hover { background: #3498db; color: white; }

   

 /* Forms */
    form {
      background: white;
      padding: 1.5rem;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      max-width: 400px;
      margin: 1rem auto;
    }
    form h2 { margin-bottom: 1rem; text-align: center; }
    .form-group {
      margin-bottom: 1rem;
    }
    label { display: block; margin-bottom: 0.5rem; font-weight: 500; }
    input, textarea, select {
      width: 100%;
      padding: 0.7rem;
      border: 1px solid #ccc;
      border-radius: 5px;
      font-size: 1rem;
    }
    .alert {
      padding: 0.7rem;
      margin: 1rem auto;
      background: #e74c3c;
      color: white;
      border-radius: 5px;
      max-width: 400px;
      text-align: center;
    }
    .success {
      background: #2ecc71;
    }

	 /* Hero Section */
    .hero {
      position: relative;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      padding: 5rem 1rem;
      background: url("9a8c15c4-9b40-4cae-9651-a1d17fbb3835.jpeg") no-repeat center center;
      background-size: cover;
      border-radius: 15px;
      color: white;
      box-shadow: 0 4px 15px rgba(0,0,0,0.4);
      margin: 2rem 0;
      overflow: hidden;
    }
    .hero::before {
      content: "";
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.55);
      border-radius: 15px;
      z-index: 0;
    }
    .hero h2, .hero p, .hero .search-bar {
      position: relative;
      z-index: 1;
    }
    .hero h2 {
      font-size: 2.5rem;
      margin-bottom: 1rem;
         text-shadow: 1px 1px 5px rgba(0,0,0,0.8);
    }
    .hero p {
      font-size: 1.2rem;
      max-width: 700px;
      margin-bottom: 2rem;
      text-shadow: 1px 1px 5px rgba(0,0,0,0.8);
    }
    .hero .search-bar {
      display: flex;
      gap: 0.5rem;
      justify-content: center;
    }
    .hero input {
      padding: 0.7rem;
      border: none;
      border-radius: 5px;
      min-width: 250px;
      font-size: 1rem;
    }



    /* Property Cards */
    .properties {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 1.5rem;
      margin-top: 2rem;
    }
    .property-card {
      background: white;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    }
    .property-card img {
      width: 100%;
      height: 180px;
      object-fit: cover;
    }
    .property-info {
      padding: 1rem;
    }
    .property-info h3 {
      margin-bottom: 0.5rem;
      color: #2c3e50;
    }
    .price {
      font-size: 1.2rem;
      font-weight: bold;
      color: #3498db;
    }
    .actions {
      display: flex;
      justify-content: space-between;
      margin-top: 1rem;
    }

    /* Dashboard */
    .dashboard {
      margin-top: 2rem;
      display: grid;
      grid-template-columns: 250px 1fr;
      gap: 1.5rem;
    }
    .sidebar {
      background: white;
      padding: 1rem;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .sidebar ul {
      list-style: none;
      margin-top: 1rem;
    }
    .sidebar li {
      margin: 1rem 0;
    }
    .sidebar a {
      text-decoration: none;
      color: #333;
      display: block;
      padding: 0.5rem;
      border-radius: 5px;
    }
    .sidebar a:hover, .sidebar a.active {
      background: #3498db;
      color: white;
    }
    .main-content {
      background: white;
      padding: 1.5rem;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    /* Messages */
    .message {
      padding: 0.8rem;
      border-bottom: 1px solid #eee;
    }
    .message .from { font-weight: bold; color: #2c3e50; }
    .message .text { margin: 0.5rem 0; }

    /* Map */
    #map {
      height: 400px;
      width: 100%;
      margin: 1rem 0;
      border-radius: 10px;
      box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    }

    /* Responsive */
    @media (max-width: 768px) {
      nav { flex-direction: column; gap: 1rem; }
      .dashboard { grid-template-columns: 1fr; }
      nav ul { flex-wrap: wrap; justify-content: center; }
    }
  </style>
</head>
<body>

  <header>
    <h1>üè° HomeLink</h1>
    <p>Find your dream home or list your property</p>
  </header>

  <nav id="navbar">
    <div class="logo">HomeLink</div>
    <ul id="navLinks">
      <li><a href="#" onclick="showPage('home')">Home</a></li>
      <li><a href="#" onclick="showPage('listings')">Properties</a></li>
      <li id="dashboardLink" style="display:none;"><a href="#" onclick="showPage('dashboard')">Dashboard</a></li>
      <li id="loginLink"><a href="#" onclick="showPage('login')">Login</a></li>
      <li id="registerLink"><a href="#" onclick="showPage('register')">Register</a></li>
      <li id="logoutLink" style="display:none;"><a href="#" onclick="logout()">Logout</a></li>
    </ul>
  </nav>

  <div class="container" id="app">
    <!-- Dynamic Content Will Be Injected Here -->
  </div>

  <!-- Google Maps API -->
  <script async defer src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap"></script>

  <script>
    // Simulate local storage database
    if (!localStorage.users) {
      localStorage.users = JSON.stringify([]);
    }
    if (!localStorage.properties) {
      localStorage.properties = JSON.stringify([]);
    }
    if (!localStorage.messages) {
      localStorage.messages = JSON.stringify([]);
    }

    let currentUser = null;
    let map = null;
    let markers = [];

    // Load current user from session
    function loadUser() {
      const saved = localStorage.loggedInUser;
      if (saved) {
        currentUser = JSON.parse(saved);
        updateNav();
      }
    }

    // Update navigation based on login status
    function updateNav() {
      document.getElementById('loginLink').style.display = currentUser ? 'none' : 'list-item';
      document.getElementById('registerLink').style.display = currentUser ? 'none' : 'list-item';
      document.getElementById('logoutLink').style.display = currentUser ? 'list-item' : 'none';
      document.getElementById('dashboardLink').style.display = currentUser ? 'list-item' : 'none';
    }

    // Initialize Google Map
    function initMap() {
      // Default center (India)
      const india = { lat: 20.5937, lng: 78.9629 };
      
      map = new google.maps.Map(document.getElementById("map"), {
        zoom: 5,
        center: india,
      });
      
      // Add click listener to map
      map.addListener("click", (event) => {
        // You can add functionality for clicking on map
        console.log("Map clicked at:", event.latLng.lat(), event.latLng.lng());
      });
    }

    // Show specific page
    function showPage(page) {
      const app = document.getElementById('app');
      let html = '';

      if (page === 'home') {
        html = `
          <h2>Welcome to HomeLink</h2>
          <p>Find your perfect rental or home for sale. Connect with verified agents and landlords.</p>
          <div class="search-bar" style="margin: 2rem 0;">
            <input type="text" id="searchQuery" placeholder="Search by location..." />
            <button onclick="searchProperties()">Search</button>
          </div>
          <div id="map"></div>
          <h3>Featured Properties</h3>
          <div class="properties" id="propertyList"></div>
        `;
      } else if (page === 'register') {
        html = `
          <form onsubmit="register(event)">
            <h2>Create an Account</h2>
            <div class="form-group">
              <label>Name</label>
              <input type="text" id="name" required />
            </div>
            <div class="form-group">
              <label>Email</label>
              <input type="email" id="email" required />
            </div>
            <div class="form-group">
              <label>Password</label>
              <input type="password" id="password" required />
            </div>
            <div class="form-group">
              <label>Role</label>
              <select id="role" required>
                <option value="tenant">Tenant / Buyer</option>
                <option value="agent">Agent / Landlord</option>
              </select>
            </div>
            <button type="submit">Register</button>
            <p style="text-align:center;margin-top:1rem;">
              Already have an account? <a href="#" onclick="showPage('login')">Login</a>
            </p>
          </form>
        `;
      } else if (page === 'login') {
        html = `
          <form onsubmit="login(event)">
            <h2>Login</h2>
            <div class="form-group">
              <label>Email</label>
              <input type="email" id="loginEmail" required />
            </div>
            <div class="form-group">
              <label>Password</label>
              <input type="password" id="loginPassword" required />
            </div>
            <button type="submit">Login</button>
            <p style="text-align:center;margin-top:1rem;">
              Don't have an account? <a href="#" onclick="showPage('register')">Register</a>
            </p>
          </form>
        `;
      } else if (page === 'dashboard') {
        if (!currentUser) return showPage('login');
        html = `
          <div class="dashboard">
            <div class="sidebar">
              <h3>Hello, ${currentUser.name}</h3>
              <p><small>${currentUser.role}</small></p>
              <ul>
                <li><a href="#" class="active" onclick="loadDashboardContent('profile')">My Profile</a></li>
                ${currentUser.role === 'agent' ? 
                  `<li><a href="#" onclick="loadDashboardContent('addProperty')">Add Property</a></li>
                   <li><a href="#" onclick="loadDashboardContent('myListings')">My Listings</a></li>` : ''}
                <li><a href="#" onclick="loadDashboardContent('messages')">Messages</a></li>
                ${currentUser.role === 'tenant' ? 
                  `<li><a href="#" onclick="loadDashboardContent('favorites')">Saved Properties</a></li>` : ''}
              </ul>
            </div>
            <div class="main-content" id="dashboardContent">
              <!-- Content loaded dynamically -->
            </div>
          </div>
        `;
      } else if (page === 'listings') {
        html = `
          <h2>All Properties</h2>
          <div class="search-bar" style="margin: 2rem 0;">
            <input type="text" id="searchQuery" placeholder="Search by location..." />
            <button onclick="searchProperties()">Search</button>
          </div>
          <div id="map"></div>
          <div class="properties" id="propertyList"></div>
        `;
      }

      app.innerHTML = html;

      // Initialize map after content is loaded
      if (page === 'home' || page === 'listings') {
        // Create map element if it doesn't exist
        if (!document.getElementById('map')) {
          const mapContainer = document.createElement('div');
          mapContainer.id = 'map';
          const propertiesContainer = document.getElementById('propertyList');
          if (propertiesContainer) {
            propertiesContainer.parentNode.insertBefore(mapContainer, propertiesContainer);
          }
        }
        
        // Load the Google Maps script if not already loaded
        if (typeof google === 'undefined') {
          loadGoogleMapsScript();
        } else {
          initMap();
        }
        
        displayProperties();
      }

      if (page === 'dashboard') {
        loadDashboardContent('profile');
      }
    }

    function loadGoogleMapsScript() {
      // Note: In a real application, you would need to get an API key from Google Cloud Platform
      const script = document.createElement('script');
      script.src = 'https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap';
      script.async = true;
      script.defer = true;
      document.head.appendChild(script);
    }

    function register(e) {
      e.preventDefault();
      const name = document.getElementById('name').value;
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      const role = document.getElementById('role').value;

      const users = JSON.parse(localStorage.users);
      if (users.some(u => u.email === email)) {
        alert('Email already exists!');
        return;
      }

      const newUser = { id: Date.now(), name, email, password, role };
      users.push(newUser);
      localStorage.users = JSON.stringify(users);
      alert('Registration successful! Please login.');
      showPage('login');
    }

    function login(e) {
      e.preventDefault();
      const email = document.getElementById('loginEmail').value;
      const password = document.getElementById('loginPassword').value;

      const users = JSON.parse(localStorage.users);
      const user = users.find(u => u.email === email && u.password === password);

      if (user) {
        currentUser = user;
        localStorage.loggedInUser = JSON.stringify(user);
        updateNav();
        showPage('dashboard');
      } else {
        alert('Invalid credentials!');
      }
    }

    function logout() {
      currentUser = null;
      delete localStorage.loggedInUser;
      updateNav();
      showPage('home');
    }

    function displayProperties(query = '') {
      const properties = JSON.parse(localStorage.properties);
      const container = document.getElementById('propertyList');
      if (!container) return;

      container.innerHTML = '';

      const filtered = properties.filter(p =>
        p.title.toLowerCase().includes(query.toLowerCase()) ||
        p.location.toLowerCase().includes(query.toLowerCase())
      );

      if (filtered.length === 0) {
        container.innerHTML = '<p>No properties found.</p>';
        return;
      }

      // Clear existing markers
      clearMarkers();

      // Geocode locations and add markers
      filtered.forEach(p => {
        geocodeLocation(p.location, (results, status) => {
          if (status === 'OK' && results[0]) {
            const position = results[0].geometry.location;
            addMarker(position, p.title, p.price, p.id);
            
            // Center map on first result
            if (markers.length === 1 && map) {
              map.setCenter(position);
              map.setZoom(12);
            }
          }
        });

        const card = document.createElement('div');
        card.className = 'property-card';
        card.innerHTML = `
          <img src="${p.image || 'https://via.placeholder.com/300x180  '}" alt="${p.title}" />
          <div class="property-info">
            <h3>${p.title}</h3>
            <p>${p.location}</p>
            <p>${p.bedrooms} bed ‚Ä¢ ${p.bathrooms} bath ‚Ä¢ ${p.area} sqft</p>
            <div class="price">‚Çπ${p.price.toLocaleString()} ${p.type === 'rent' ? '/month' : ''}</div>
            <div class="actions">
              <button onclick="viewProperty(${p.id})">View Details</button>
              <button onclick="saveOrContact(${p.id})">
                ${currentUser ? (currentUser.role === 'tenant' ? 'Save' : 'Contact') : 'Login to Contact'}
              </button>
            </div>
          </div>
        `;
        container.appendChild(card);
      });
    }

    function geocodeLocation(location, callback) {
      if (typeof google === 'undefined' || !google.maps.Geocoder) {
        console.error('Google Maps API not loaded');
        return;
      }
      
      const geocoder = new google.maps.Geocoder();
      geocoder.geocode({ 'address': location }, callback);
    }

    function addMarker(position, title, price, id) {
      if (!map) return;
      
      const marker = new google.maps.Marker({
        position: position,
        map: map,
        title: title
      });
      
      const infoWindow = new google.maps.InfoWindow({
        content: `<div><strong>${title}</strong><br>Price: ‚Çπ${price.toLocaleString()}<br><button onclick="viewProperty(${id})">View Details</button></div>`
      });
      
      marker.addListener('click', () => {
        infoWindow.open(map, marker);
      });
      
      markers.push(marker);
    }

    function clearMarkers() {
      for (let marker of markers) {
        marker.setMap(null);
      }
      markers = [];
    }

    function viewProperty(id) {
      const properties = JSON.parse(localStorage.properties);
      const prop = properties.find(p => p.id === id);
      if (!prop) return alert('Property not found.');

      const app = document.getElementById('app');
      app.innerHTML = `
        <div style="max-width:800px;margin:auto;">
          <button onclick="showPage('listings')" style="margin-bottom:1rem;">‚Üê Back</button>
          <div style="background:white;padding:2rem;border-radius:10px;box-shadow:0 3px 10px rgba(0,0,0,0.1);">
            <img src="${prop.image || 'https://via.placeholder.com/800x400  '}" alt="${prop.title}" style="width:100%;border-radius:10px;"/>
            <h2>${prop.title}</h2>
            <p><strong>Location:</strong> ${prop.location}</p>
            <p><strong>Price:</strong> ‚Çπ${prop.price.toLocaleString()} ${prop.type === 'rent' ? '/month' : ' (Buy)'}</p>
            <p><strong>Bedrooms:</strong> ${prop.bedrooms} | <strong>Bathrooms:</strong> ${prop.bathrooms} | <strong>Area:</strong> ${prop.area} sqft</p>
            <p><strong>Description:</strong> ${prop.description}</p>
            <p><strong>Posted by:</strong> ${prop.postedBy}</p>
            <div id="map"></div>
            <button onclick="saveOrContact(${prop.id})">
              ${currentUser ? (currentUser.role === 'tenant' ? 'Save Property' : 'Contact Tenant') : 'Login to Contact'}
            </button>
          </div>
        </div>
      `;

      // Initialize map for property view
      if (typeof google === 'undefined') {
        loadGoogleMapsScript();
      } else {
        initMap();
        geocodeLocation(prop.location, (results, status) => {
          if (status === 'OK' && results[0]) {
            const position = results[0].geometry.location;
            map.setCenter(position);
            map.setZoom(15);
            addMarker(position, prop.title, prop.price, prop.id);
          }
        });
      }
    }

    function saveOrContact(id) {
      if (!currentUser) {
        return showPage('login');
      }

      if (currentUser.role === 'tenant') {
        let favorites = JSON.parse(localStorage.getItem(`favorites_${currentUser.id}`) || '[]');
        if (!favorites.includes(id)) {
          favorites.push(id);
          localStorage.setItem(`favorites_${currentUser.id}`, JSON.stringify(favorites));
          alert('Property saved!');
        } else {
          alert('Already saved!');
        }
      } else {
        // Agent wants to contact tenant
        const properties = JSON.parse(localStorage.properties);
        const prop = properties.find(p => p.id === id);
        if (prop) {
          const msg = `Hello, I'm ${currentUser.name}, the agent for ${prop.title}. Let's schedule a viewing.`;
          const messages = JSON.parse(localStorage.messages);
          messages.push({
            id: Date.now(),
            from: currentUser.id,
            to: prop.tenantId || 1,
            text: msg,
            propertyId: id,
            timestamp: new Date().toLocaleString()
          });
          localStorage.messages = JSON.stringify(messages);
          alert('Message sent to tenant!');
        }
      }
    }

    function searchProperties() {
      const query = document.getElementById('searchQuery').value;
      if (query.trim() === '') {
        alert('Please enter a location to search');
        return;
      }
      
      if (window.location.toString().includes('listings')) {
        displayProperties(query);
      } else {
        showPage('listings');
        setTimeout(() => {
          document.getElementById('searchQuery').value = query;
          displayProperties(query);
        }, 500);
      }
    }

    // Dashboard Content
    function loadDashboardContent(section) {
      const content = document.getElementById('dashboardContent');
      if (!content) return;

      if (section === 'profile') {
        content.innerHTML = `
          <h2>Your Profile</h2>
          <p><strong>Name:</strong> ${currentUser.name}</p>
          <p><strong>Email:</strong> ${currentUser.email}</p>
          <p><strong>Role:</strong> ${currentUser.role}</p>
          <button onclick="logout()">Logout</button>
        `;
      } else if (section === 'addProperty' && currentUser.role === 'agent') {
        content.innerHTML = `
          <h2>Add New Property</h2>
          <form onsubmit="addProperty(event)">
            <div class="form-group">
              <label>Title</label>
              <input type="text" id="title" required />
            </div>
            <div class="form-group">
              <label>Location</label>
              <input type="text" id="location" required />
            </div>
            <div class="form-group">
              <label>Price (‚Çπ)</label>
              <input type="number" id="price" required />
            </div>
            <div class="form-group">
              <label>Type</label>
              <select id="type" required>
                <option value="rent">Rent</option>
                <option value="sale">Buy</option>
              </select>
            </div>
            <div class="form-group">
              <label>Bedrooms</label>
              <input type="number" id="bedrooms" min="1" required />
            </div>
            <div class="form-group">
              <label>Bathrooms</label>
              <input type="number" id="bathrooms" min="1" required />
            </div>
            <div class="form-group">
              <label>Area (sqft)</label>
              <input type="number" id="area" required />
            </div>
            <div class="form-group">
              <label>Description</label>
              <textarea id="description" rows="4" required></textarea>
            </div>
            <div class="form-group">
              <label>Image URL (optional)</label>
              <input type="url" id="image" />
            </div>
            <button type="submit">List Property</button>
          </form>
        `;
      } else if (section === 'myListings' && currentUser.role === 'agent') {
        const properties = JSON.parse(localStorage.properties).filter(p => p.agentId === currentUser.id);
        content.innerHTML = `<h2>My Listings</h2>`;
        if (properties.length === 0) {
          content.innerHTML += `<p>You haven't listed any properties yet.</p>`;
        } else {
          properties.forEach(p => {
            content.innerHTML += `
              <div style="border:1px solid #ddd;padding:1rem;margin:1rem 0;border-radius:5px;">
                <h3>${p.title}</h3>
                <p>${p.location} | ‚Çπ${p.price} ${p.type === 'rent' ? '/month' : ''}</p>
                <small>Posted on: ${new Date(p.date).toLocaleDateString()}</small>
                <div style="margin-top:1rem;">
                  <button onclick="editProperty(${p.id})">Edit</button>
                  <button onclick="deleteProperty(${p.id})" style="background:#e74c3c;">Delete</button>
                </div>
              </div>
            `;
          });
        }
      } else if (section === 'messages') {
        const messages = JSON.parse(localStorage.messages).filter(m => m.to === currentUser.id);
        content.innerHTML = `<h2>Inbox</h2>`;
        if (messages.length === 0) {
          content.innerHTML += `<p>No messages yet.</p>`;
        } else {
          messages.forEach(m => {
            const sender = JSON.parse(localStorage.users).find(u => u.id == m.from);
            content.innerHTML += `
              <div class="message">
                <div class="from">From: ${sender?.name || 'Unknown'}</div>
                <div class="time">${m.timestamp}</div>
                <div class="text">${m.text}</div>
              </div>
            `;
          });
        }
      } else if (section === 'favorites' && currentUser.role === 'tenant') {
        const favorites = JSON.parse(localStorage.getItem(`favorites_${currentUser.id}`) || '[]');
        const properties = JSON.parse(localStorage.properties).filter(p => favorites.includes(p.id));
        content.innerHTML = `<h2>Saved Properties</h2>`;
        if (properties.length === 0) {
          content.innerHTML += `<p>No saved properties.</p>`;
        } else {
          properties.forEach(p => {
            content.innerHTML += `
              <div style="border:1px solid #ddd;padding:1rem;margin:1rem 0;border-radius:5px;">
                <h3>${p.title}</h3>
                <p>${p.location} | ‚Çπ${p.price}</p>
                <button onclick="viewProperty(${p.id})">View Details</button>
              </div>
            `;
          });
        }
      }
    }

    function addProperty(e) {
      e.preventDefault();
      const title = document.getElementById('title').value;
      const location = document.getElementById('location').value;
      const price = parseFloat(document.getElementById('price').value);
      const type = document.getElementById('type').value;
      const bedrooms = parseInt(document.getElementById('bedrooms').value);
      const bathrooms = parseInt(document.getElementById('bathrooms').value);
      const area = parseInt(document.getElementById('area').value);
      const description = document.getElementById('description').value;
      const image = document.getElementById('image').value || 'https://via.placeholder.com/300x180  ';

      const newProp = {
        id: Date.now(),
        title, location, price, type, bedrooms, bathrooms, area,
        description, image, agentId: currentUser.id,
        postedBy: currentUser.name,
        date: new Date().toISOString(),
        tenantId: null
      };

      const properties = JSON.parse(localStorage.properties);
      properties.push(newProp);
      localStorage.properties = JSON.stringify(properties);

      alert('Property listed successfully!');
      loadDashboardContent('myListings');
    }

    function deleteProperty(id) {
      let properties = JSON.parse(localStorage.properties);
      properties = properties.filter(p => p.id !== id);
      localStorage.properties = JSON.stringify(properties);
      loadDashboardContent('myListings');
    }

    function editProperty(id) {
      const properties = JSON.parse(localStorage.properties);
      const prop = properties.find(p => p.id === id);
      if (!prop) return;

      const newTitle = prompt('Edit title:', prop.title);
      if (newTitle === null) return;
      prop.title = newTitle;
      prop.price = parseFloat(prompt('Price:', prop.price));
      prop.location = prompt('Location:', prop.location);

      localStorage.properties = JSON.stringify(properties);
      alert('Updated!');
      loadDashboardContent('myListings');
    }

    // Initialize App
    window.onload = function() {
      loadUser();
      showPage('home');
    };
  </script>
</body>
</html>
